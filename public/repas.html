<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Repas</title>
  </head>
  <body>
    <h2>Gérer ses repas</h2>
    <div id="contenu"></div>

    <table id="tableau_repas">
      <thead>
        <tr>
          <th id="thDate">Date du repas</th>
          <th id="thInvites">Nombre invités</th>
          <th id="thRecettes">Recettes</th>
        </tr>
      </thead>
    </table>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js"></script>

    <script>
      var tableau = document.querySelector("#tableau_repas");
      var tBody = document.createElement("tbody");

      //On récupère les repas et on les insère dans le tableau :
      axios.get("/api/repas").then((response) => {
        console.log(response.data);

        //Insérer les dates :
        response.data.forEach((element, index) => {
          var tr = document.createElement("tr");
          //On insère le date :
          var tdDate = document.createElement("td");
          tdDate.innerHTML = element.Date_repas;
          tr.appendChild(tdDate);
          tBody.appendChild(tr);
          tableau.appendChild(tBody);

          //Et ensuite les invitées :
          var tdInvites = document.createElement("td");
          tdInvites.innerHTML = element.Invites;
          tr.appendChild(tdInvites);
          tBody.appendChild(tr);
          tableau.appendChild(tBody);
        });
      });

      //On récupère les recettes de chaque repas et on les ajoute dans le tableau :
      axios.get("/api/recettes_repas").then((response) => {
        console.log(response);
      });

      // var newP = document.createElement("div");
      // var newContent = document.createTextNode("Hi there and greetings!");

      // newP.appendChild(newContent);
      // document.body.insertBefore(newP, contenu);
    </script>
  </body>
</html>
